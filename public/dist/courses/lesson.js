define("/dist/courses/lesson",["jquery","form","template"],function(e,t,a){var n=e("jquery");e("form");var s=e("template"),i=n("#lesson"),l=n("#item"),r=n("#total"),d=n("#save");n("#addBtn").on("click",function(){var e=s("lessonTpl",{});return i.find("form").html(e),i.modal(),!1}),n("#addLesson").on("submit",function(){var e=n(this).attr("data-key"),t=n('[name="ls_name"]').val(),a=n('[name="ls_minutes"]').val(),d=n('[name="ls_seconds"]').val(),o=l.children().size()+1;return n(this).ajaxSubmit({url:"/course/lesson",type:"post",success:function(n){var u={index:o,lsName:t,lsDuration:a+":"+d},m=s("itemTpl",u);e?(l.find("li").eq(e).find("span.name").text(t),l.find("li").eq(e).find("span.duration").text(a+":"+d)):l.append(m),r.text("课时 : "+o),i.modal("hide")}}),!1}),l.on("click",".btn",function(){var e=n(this);if(parent=e.parents("li"),ls_id=parent.attr("data-id"),key=parent.index(),e.is(".edit")){d.attr("data-key",key);e.parents("li").prev();n.ajax({url:"/course/lesson/edit",type:"post",data:{ls_id:ls_id},success:function(e){var t=s("lessonTpl",e);n("#addLesson").html(t),i.modal()}})}e.is(".preview")&&alert("预览"),e.is(".delete")&&alert("删除")})});